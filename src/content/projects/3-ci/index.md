---
title: "Spring CI/CD Template"
description: "EC2 ν™κ²½μ—μ„ Spring Boot ν”„λ΅μ νΈλ¥Ό μ„ν• λ¬΄μ¤‘λ‹¨ λ°°ν¬ + λ¨λ‹ν„°λ§ ν…ν”λ¦Ώ"
date: "Apr 15 2025"
repoURL: "https://github.com/tape4/spring-cicd-template"
---

## μ†κ°

Spring ν”„λ΅μ νΈλ¥Ό μ—¬λ¬ λ² μ§„ν–‰ν•λ©΄μ„, μ ν•λ λ¦¬μ†μ¤(AWS EC2 ν”„λ¦¬ν‹°μ–΄) ν™κ²½κ³Ό λ°λ³µλλ” μ”κµ¬μ‚¬ν•­ μ†μ—μ„ ν…ν”λ¦Ώμ ν•„μ”μ„±μ„ λκ»΄ μ§μ ‘ λ§λ“  **CI/CD μλ™ν™” λ° λ¨λ‹ν„°λ§ ν…ν”λ¦Ώ**μ΄λ‹¤.  
Spring Boot, Nginx, MariaDB, Redis, Grafana, Prometheus, Lokiλ¥Ό λ¨λ‘ Docker κΈ°λ°μΌλ΅ κµ¬μ„±ν•κ³ , μ¤ν¬λ¦½νΈ μ‹¤ν–‰ λ‹¨ ν•λ²λ§μΌλ΅λ„ λ¬΄μ¤‘λ‹¨ λ΅¤λ§ μ—…λ°μ΄νΈκΉμ§€ μ§€μ›ν•λ‹¤.  
κ°μΈ ν”„λ΅μ νΈλ‚ μ‚¬μ΄λ“ ν”„λ΅μ νΈμ—μ„ μ†μ‰½κ² λ°°ν¬ λ° μ΄μ μλ™ν™”λ¥Ό μ‹μ‘ν•  μ μλ„λ΅ μ„¤κ³„ν–λ‹¤.

---

## μ‹μ¤ν… κµ¬μ„±λ„

### π“¦ μ „μ²΄ μΈν”„λΌ κµ¬μ„±

![diagram](/cicd-mermaid.png)

---

## μ£Όμ” κΈ°λ¥

-   **CI/CD μλ™ν™”**: GitHub Actionsλ΅ Docker μ΄λ―Έμ§€λ¥Ό λΉλ“ν•κ³ , μ¤ν¬λ¦½νΈλ¥Ό ν†µν•΄ λ΅¤λ§ μ—…λ°μ΄νΈ μν–‰
-   **λ¬΄μ¤‘λ‹¨ λ°°ν¬**: Spring App #1, #2λ¥Ό λ²κ°μ•„ λ°°ν¬ν•μ—¬ μ„λΉ„μ¤ μ¤‘λ‹¨ μ—†μ΄ μ—…λ°μ΄νΈ
-   **λ¨λ‹ν„°λ§ μ¤νƒ**: Prometheus, Grafana, Lokiλ΅ μ‹¤μ‹κ°„ λ©”νΈλ¦­ λ° λ΅κ·Έ μ‹κ°ν™”
-   **Nginx λ΅λ“λ°Έλ°μ‹± λ° μƒνƒ ν™•μΈ**: `/status`, `/grafana` κ²½λ΅ μ κ³µ
-   **Docker κΈ°λ° ν†µν•© μΈν”„λΌ**: MariaDB, Redis ν¬ν•¨

---

## ν”„λ΅μ νΈ κµ¬μ΅°

```
.
β”β”€β”€ nginx/                 # Nginx μ„¤μ •
β”β”€β”€ grafana/               # λ¨λ‹ν„°λ§ μ„¤μ • (Grafana, Prometheus, Loki)
β”β”€β”€ rolling_update/        # λ΅¤λ§ μ—…λ°μ΄νΈ μ¤ν¬λ¦½νΈ
β”β”€β”€ scripts/               # μ‹¤ν–‰/μΆ…λ£ μ¤ν¬λ¦½νΈ λ¨μ
β”β”€β”€ storage/               # DB/Redis μ„¤μ •
β””β”€β”€ .env.template          # ν™κ²½ λ³€μ ν…ν”λ¦Ώ
```

---

## μ‚¬μ© λ°©λ²• μ”μ•½

```bash
# ν™κ²½ μ„¤μ •
cp .env.template .env

# κ¶ν• λ¶€μ—¬
chmod +x scripts/*.sh
chmod +x rolling_update/*.sh

# μΈν”„λΌ μ‹μ‘
./scripts/all-infra-launch.sh

# λ΅¤λ§ μ—…λ°μ΄νΈ
./rolling_update/rolling-update.sh
```

---

## λλ‚€ μ 

μ΄ ν…ν”λ¦Ώμ„ λ§λ“¤λ©΄μ„, λ‹¨μν μ½”λ“λ¥Ό μ‘μ„±ν•λ” κ²ƒλΏλ§ μ•„λ‹λΌ μ„λΉ„μ¤κ°€ **μ΄μλλ” ν™κ²½κΉμ§€ κ³ λ ¤ν•λ” κ²ƒ**μ μ¤‘μ”ν•¨μ„ ν¬κ² λκΌλ‹¤. CI/CD, λ¨λ‹ν„°λ§, λ¬΄μ¤‘λ‹¨ λ°°ν¬ λ“±μ€ κ°λ°μμ—κ² λ” μ΄μƒ μ„ νƒμ΄ μ•„λ‹ ν•„μμ μΈ μ—­λ‰μ΄ λμ—κ³ , μ ν•λ λ¦¬μ†μ¤ μ•μ—μ„λ„ μ¶©λ¶„ν μ‹¤μ©μ μΈ μΈν”„λΌλ¥Ό κµ¬μ¶•ν•  μ μλ‹¤λ” κ²ƒμ„ μ§μ ‘ κ²½ν—ν•  μ μμ—λ‹¤.

λ°λ³µ κ°€λ¥ν• μ‘μ—…μ„ μλ™ν™”ν•λ”κ±΄ ν•­μƒ μ¦κ²λ‹¤.

νΉν ν”„λ΅μ νΈμ™€ λ³„κ°λ΅, HTTPS ν™κ²½μ„ κµ¬μ„±ν•λ©΄μ„ [**AWSμ Public IPv4 μ •μ±… λ³€κ²½**](https://aws.amazon.com/ko/blogs/korea/new-aws-public-ipv4-address-charge-public-ip-insights/)μΌλ΅ μΈν•΄ κΈ°μ΅΄μ— μ‚¬μ©ν•λ AWS Certificate Managerμ™€ Load Balancerλ¥Ό ν†µν• λ¬΄λ£ μΈμ¦μ„ λ°©μ‹μ΄ μ λ£ν™”λμ—λ‹¤.  
μ΄μ— λ”°λΌ **Nginxμ™€ Certbotμ„ μ΄μ©ν• λ¬΄λ£ μΈμ¦μ„ λ°κΈ‰ λ° κ°±μ‹  λ°©μ‹μΌλ΅ κµ¬μ΅°λ¥Ό λ³€κ²½**ν•μ€μΌλ©°, μ΄ λ¶€λ¶„μ— λ€ν•΄μ„λ„ ν…ν”λ¦Ώμ— μ¶”ν›„ λ°μν•  μμ •μ΄λ‹¤.
